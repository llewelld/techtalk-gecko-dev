\PassOptionsToPackage{table}{xcolor}

\documentclass[
%	handout,
	notes=none,
	aspectratio=169
]{beamer}

% Comment out the following line to hide the notes
%\setbeameroption{show notes}

\input{macros}

\mode<handout>{%
	\pgfpagesuselayout{8 on 1}[a4paper,border shrink=5mm]
	\setbeameroption{show notes}
}

\usefolder{theme}
\usetheme{sailfish}

\begin{document}

\title{Anatomy of a Browser}
\subtitle{Embedded Mobile Lizards}
\author{David Llewellyn-Jones}
\date{5th November 2024}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand{\thefootnote}{\arabic{footnote}}

\frame{
\titlepage
}
\note{
}

\renewcommand{\thefootnote}{\fnsymbol{footnote}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{The Truth}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\begin{shadequote}[r]{King's Bench Division, 1927}
\vspace{-0.3cm} \raggedright \\
{\huge \vphantom{Og}The truth, the whole truth, \\and nothing but the truth.} \\
\vspace{0.3cm}
\end{shadequote}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{The Truth About Browsers}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\begin{shadequote}[r]{David, just now}
\vspace{-0.3cm} \raggedright \\
{\huge Subjective, incomplete, \\and easily overgeneralised.} \\
\vspace{0.3cm}
\end{shadequote}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Gecko}

\begin{columns}[T]
\begin{column}[T]{0.6\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.5cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Mozilla's rendering engine used in Firefox
\item Released in 2000, Netscape 6
\item Alternative to Blink, WebKit, Netsurf
\end{enumerate}

\end{column}
\begin{column}[T]{0.4\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}
\includegraphics[width=1.0\textwidth]{mozilla}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item Mozilla's rendering engine used in Firefox
\item First appeared in 2000 with the release of Netscape 6
\item Alternative to Blink (Chrome, Edge, Brave, Vivaldi), WebKit (Safari, iOS, Ephiphany), Netsurf (Netsurf)
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Embedded Browsers}

\begin{columns}[T]
\begin{column}[T]{1.0\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\begin{shadequote}[r]{WPE, October 2024}
For many of us, a browser is an application... You click an icon on your graphical operating system, navigate somewhere with a URL bar, search, and so on... In contrast, an \textbf{\textit{embedded browser}} is contained within another application or is built for a specific purpose and runs in an embedded system, and the application controlling the embedded browser does not provide all the typical features of browsers running in desktops.
\end{shadequote}

\end{column}
\end{columns}

\end{frame}
\note{
WPE: Web Platform for Embedded

What is an Embedded Browser?

\url{https://wpewebkit.org/about/what-is-embedded.html}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Embedded Browsers}

\begin{columns}[T]
\begin{column}[T]{0.55\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.5cm}
What does ``embedded'' mean?
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Smaller resource footprint devices
\item Embeddable in other programs
\item Minimal user interface
\item All of the above
\end{enumerate}

\end{column}
\begin{column}[T]{0.37\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.0cm}
\includegraphics[width=0.9\textwidth]{mozilla-on-sailfish}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{1.05\textwidth}

\vspace{0.7cm}
\includegraphics[width=1.0\textwidth]{gantt}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item The browser history timeline.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Embedding Gecko}

\begin{columns}[T]
\begin{column}[T]{1.0\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\begin{shadequote}[r]{Chris Lord, February 2016}
Gecko has limited embedding capability that is not well-documented, not well-maintained and not heavily invested in... We have at various points in history had embedding APIs/capabilities, but we have either dropped them (gtkmozembed) or let them bit-rot (IPCLite).
\end{shadequote}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item It's an old quote, but holds true today.
\item Chris Lord was a Mozilla engineer at the time.
\item He makes clear he's not criticising the implementations, but rather the strategic direction of Mozilla.
\item IPCLite is another name for EmbedLite.
\item \url{https://www.chrislord.net/2016/02/24/the-case-for-an-embeddable-gecko/}
\item \url{https://www.chrislord.net/2016/03/08/state-of-embedding-in-gecko/}
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}<presentation:0>
\frametitle{Context}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}
\setlength{\parskip}{0.5em}

\vspace{2.0cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Work upgrading the browser on Sailfish OS
\item ESR 78.15.0 to ESR 91.9.1
\item Work conducted over 13 months: August 2023 - September 2024
\end{enumerate}

\end{column}
\begin{column}[T]{0.3\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}


\vspace{0.5cm}
{\centering

\includegraphics[width=0.95\textwidth]{qrcode-gecko-dev}

\vspace{-0.1cm}

\noindent{\parbox{0.8\textwidth}{{\large
\href{https://www.flypig.co.uk/gecko}{{\code https:// \\
www.flypig.co.uk \\
/gecko\\
}}
}}
}
}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Working with the browser}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.2cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Long build times
\item Complex build process
\item Random upstream changes (e.g. converting quote characters)
\item Removal of the entire EmbedLite rendering pipeline
\end{enumerate}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}
\includegraphics[width=1.0\textwidth]{gecko-build}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{1.13\textwidth}

\vspace{0.0cm}
\includegraphics[width=1.0\textwidth]{timeline-dev}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}<presentation:0>
\frametitle{Sailfish Browser}

\begin{columns}[T]
\begin{column}[T]{1.1\textwidth}

\vspace{0.5cm}
\includegraphics[width=1.0\textwidth]{components}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item The Sailfish Browser isn't just gecko.
\item {\code sailfish-browser} provides the user interface (C++/Qt/QML).
\item {\code embedlite-components} provides JavaScript user interface functionality (JavaScript).
\item {\code qtmozembed} turns gecko into an embeddable Qt component (C++/Qt).
\item {\code gecko} is the EmbedLite embedded gecko renderer (JavaScript/C++/Rust).
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}<presentation:0>
\frametitle{Sailfish Browser}

\begin{columns}[T]
\begin{column}[T]{1.1\textwidth}

\vspace{0.5cm}
\includegraphics[width=1.0\textwidth]{components-languages}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item The Sailfish Browser isn't just gecko.
\item {\code sailfish-browser} provides the user interface (C++/Qt/QML).
\item {\code embedlite-components} provides JavaScript user interface functionality (JavaScript).
\item {\code qtmozembed} turns gecko into an embeddable Qt component (C++/Qt).
\item {\code gecko} is the EmbedLite embedded gecko renderer (JavaScript/C++/Rust).
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Gecko Code Distribution}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}

\vspace{0.5cm}
\includegraphics[width=1.0\textwidth]{totals}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Chromium Code Distribution}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}

\vspace{0.5cm}
\includegraphics[width=1.0\textwidth]{totals-chromium}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Gecko Patches}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}

\vspace{0.5cm}
\includegraphics[width=1.0\textwidth]{patches}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Basic Browser Structure}

\begin{columns}[T]
\begin{column}[T]{0.66\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.5cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Protocol client (HTTP/S, file, FTP,...)
\item JavaScript engine
\item Media decoder (JPG, PNG, audio, video)
\item DOM - Document Object Model
\item Layout/rendering engine (HTML, CSS, SVG)
\item Chrome
\end{enumerate}

\end{column}
\begin{column}[T]{0.34\textwidth}
\setlength{\parskip}{0.5em}

\vspace{-0.2cm}
\includegraphics[width=1.0\textwidth]{blocks}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{1.0\textwidth}

\vspace{0.2cm}
\includegraphics[width=1.0\textwidth]{internals}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Embedded Browser Surface}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.0cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Rendering canvas
\item Event loop and user input (taps, keyboard, APZ)
\item Browser actions
\item JavaScript privileged execution
\item JavaScript in-DOM execution
\item Message sending/receiving
\end{enumerate}

\end{column}
\begin{column}[T]{0.3\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}
\includegraphics[width=0.8\textwidth]{chinese-room}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Embedding APIs}

\begin{columns}[T]
\begin{column}[T]{0.73\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.0cm}
Most browser embedding frameworks offer a similar API
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Settings controller
\item Separate view widgets
\item Web controls (load, forwards, back)
\item Javascript execution
\item Message passing interface
\end{enumerate}
Brief look at Chromium Embedded Framework, Qt WebEngine, Sailfish WebView

\end{column}
\begin{column}[T]{0.2\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}
\hspace{-1.0cm}
\includegraphics[width=1.0\textwidth]{embedded-framework-logos}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}

\lstinputlisting[language=cpp,firstline=1,lastline=14]{code-examples/blink-cef.cpp}

\lstinputlisting[language=cpp,firstline=47,lastline=62]{code-examples/blink-cef.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}

\lstinputlisting[language=cpp,firstline=33,lastline=45]{code-examples/blink-cef.cpp}

\lstinputlisting[language=cpp,firstline=16,lastline=31]{code-examples/blink-cef.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item {\code CefBrowserHost}: The core browser class that offers non-page specific functionality and the creation of {\code CefBrowser} objects.
\item {\code CefBrowser}: A wrapper class used to control a particular view.
\item {\code CefFrame}: Allows deeper interaction with a Web page. You'll notice this is the interface used for executing |JavaScript and sending messages to the browser window. 
\item {\ CefV8Value}: An interface for accessing JavaScript objects from C++. This can hold many different data types, including Ints, Floats and Strings. And also functions.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.4cm}

\lstinputlisting[language=cpp,firstline=1,lastline=21]{code-examples/blink-qtweb.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.4cm}

\lstinputlisting[language=cpp,firstline=23,lastline=49]{code-examples/blink-qtweb.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item {\code QWebEnginePage}: Provides access to core functionalities including execution of JavaScript. You can send JavaScript to be executed which can interact witht the DOM and return a result.
\item {\code QWebEngineView}: Provides the view onto a Web page, including setting the URL, navigating, etc. As you can see, the {\code QWebEnginePage} is accessed via the {\code QWebEngineView}.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=1,lastline=18]{code-examples/gecko-webview.cpp}

\lstinputlisting[language=cpp,firstline=20,lastline=31]{code-examples/gecko-webview.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=33,lastline=52]{code-examples/gecko-webview.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item {\code WebEngine}: Provides access to the core functionality of the renderer, including sending and receiving notifcations from the privileged code and injecting privileged code into the system.
\item {\code WebEngineSettings}: Allows global renderer settings to be controlled.
\item {\code QuickMozView} which is subclassed to a class called {\code WebView}: represents a single widget in an application for a page. You can see it's also possible to execute non-privileged JavaScript in the DOM context and to navigate and so on.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{1.0\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.0cm}
\includegraphics[width=1.0\textwidth]{examples}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}

\lstinputlisting[language=JavaScript,firstline=1,lastline=33]{code-examples/dom-walk.js}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}

\lstinputlisting[language=JavaScript,firstline=35,lastline=58]{code-examples/dom-walk.js}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Interface Definition Language}

\begin{columns}[T]
\begin{column}[T]{0.65\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.5cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Interaction between native code and JavaScript
\item Requires type conversion and memory management
\item IDL - generate native/JS-compatible interfaces
\item Make native calls from JavaScript
\item Make JavaScript calls from native
\end{enumerate}

\end{column}
\begin{column}[T]{0.35\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.0cm}
\includegraphics[width=1.0\textwidth]{xpcom-types}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{1.048\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.4cm}

\lstinputlisting[language=idl,firstline=4,lastline=16]{code-examples/prompt-factory.cpp}

\lstinputlisting[language=cpp,firstline=102,lastline=113]{code-examples/prompt-factory.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=JavaScript,firstline=21,lastline=49]{code-examples/prompt-factory.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=119,lastline=147]{code-examples/prompt-factory.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{1.048\textwidth}
\setlength{\parskip}{1.048em}

\vspace{0.5cm}

\lstinputlisting[language=JavaScript,firstline=71,lastline=84]{code-examples/prompt-factory.cpp}

\lstinputlisting[language=cpp,firstline=55,lastline=66]{code-examples/prompt-factory.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=11,lastline=45]{code-examples/jsvalue.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=47,lastline=81,firstnumber=36]{code-examples/jsvalue.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Inter-Thread/Process Messages}

\begin{columns}[T]
\begin{column}[T]{0.7\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.0cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Inter-Thread and Inter-Process Message Passing
\item Inspired by the {\it actor model\/} - Parent-Child pairs
\item Actors bound to an endpoint, bound to a thread
\item Actor framework schedules tasks to run on event target
\item Inter-[thread|process] Protocol Definition Language
\end{enumerate}

\end{column}
\begin{column}[T]{0.3\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}
\includegraphics[width=1.0\textwidth]{fog-cutter-actor}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item IPDL quick reference: \url{https://firefox-source-docs.mozilla.org/ipc/ipdl.html\#ipdl-syntax-quick-reference}
\item Similar to a ``Fog Cutter'' actor, see Carl Hewitt, ``Actor Model of Computation: Scalable Robust Information Systems,'' 2015, \url{https://arxiv.org/abs/1008.1459}.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Inter-Thread/Process Messages}

\begin{columns}[T]
\begin{column}[T]{0.83\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.5cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Message ordering is presevered
\item Only child actors can send sync messages or break the connection
\item Look like asynchronous method calls
\item IPDL files generate parent and child C++ code
\item Clients subclass the generated interfaces
\end{enumerate}

\end{column}
\begin{column}[T]{0.17\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.7cm}
\hspace{-0.5cm}
\includegraphics[width=1.0\textwidth]{ipdl}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item IPDL quick reference: \url{https://firefox-source-docs.mozilla.org/ipc/ipdl.html\#ipdl-syntax-quick-reference}
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=ipdl,firstline=5,lastline=13]{code-examples/ipdl.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=33,lastline=43]{code-examples/ipdl.cpp}

\lstinputlisting[language=cpp,firstline=19,lastline=27]{code-examples/ipdl.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{}

\begin{columns}[T]
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=65,lastline=74]{code-examples/ipdl.cpp}

\lstinputlisting[language=cpp,firstline=49,lastline=59]{code-examples/ipdl.cpp}

\end{column}
\begin{column}[T]{0.5\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}

\lstinputlisting[language=cpp,firstline=80,lastline=108]{code-examples/ipdl.cpp}

\end{column}
\end{columns}

\end{frame}
\note{
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Working with Gecko}

\begin{columns}[T]
\begin{column}[T]{0.6\textwidth}
\setlength{\parskip}{0.5em}

\vspace{1.2cm}
\begin{enumerate}
\setlength{\parskip}{0.5em}
\item Very mature codebase
\item An ecosystem of software techniques
\item Deep stack of technologies
\item Constant introduction of new ideas
\item A critical operating system component
\end{enumerate}

\end{column}
\begin{column}[T]{0.4\textwidth}
\setlength{\parskip}{0.5em}

\vspace{0.5cm}
\includegraphics[width=0.8\textwidth]{mozillagecko}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item Mozilla Gecko logo
\item Mozilla Public License Version 1.1
\item \url{https://commons.wikimedia.org/w/index.php?title=File:Mozillagecko-logo.svg&oldid=683398296}
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}<presentation:0>
%\frametitle{Thigg's Images}

\begin{columns}[T]
\begin{column}[T]{1.0\textwidth}

\vspace{-0.12cm}
\hspace*{-1.1cm}
\includegraphics[width=1.15\textwidth]{Thigg}

\end{column}
\end{columns}

\end{frame}
\note{
\begin{enumerate}
\item A special shout-out to Thigg who has been created AI-generated images to go alongside my blog posts. They are amazing.
\end{enumerate}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
\frametitle{Further info}
\setlength{\leftmargini}{7.5em}
\vspace{1.0cm}

\begin{itemize}
\setlength{\parskip}{1.0em}
\item[Dev Diary \,] \url{https://www.flypig.co.uk/gecko}
\item[Slides source \,] \url{https://github.com/llewelld/techtalk-gecko-dev}
\item[Gecko source \,] \url{https://github.com/llewelld/gecko-dev}
\item[CEF \,] \url{https://bitbucket.org/chromiumembedded/cef}
\item[QtWebEngine \,] \url{https://doc.qt.io/qt-6/qtwebengine-index.html}
\item[WebView \,] \url{https://sailfishos.org/develop/docs/sailfish-components-webview}
\end{itemize}

\end{frame}
\note{
\fontsize{7pt}{8pt}{\bibliographystyle{ieeetr}}
\bibliography{slides}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
